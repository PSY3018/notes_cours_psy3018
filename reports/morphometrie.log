Traceback (most recent call last):
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/jupyter_cache/executors/utils.py", line 51, in single_nb_execution
    executenb(
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/client.py", line 1112, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/util.py", line 74, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/util.py", line 53, in just_run
    return loop.run_until_complete(coro)
  File "/usr/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
    return future.result()
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/client.py", line 553, in async_execute
    await self.async_execute_cell(
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/client.py", line 857, in async_execute_cell
    self._check_raise_for_error(cell, exec_reply)
  File "/home/pbellec/env/psy3018/lib/python3.8/site-packages/nbclient/client.py", line 760, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# Importe les librairies n√©cessaires
import matplotlib.pyplot as plt
import numpy as np
from myst_nb import glue
import seaborn as sns

import warnings
warnings.filterwarnings("ignore")

# T√©l√©charge un scan anatomique (template MNI152)
from nilearn import datasets
mni = datasets.fetch_icbm152_2009()

# Initialise la figure
fig = plt.figure(figsize=(15, 15))

from nilearn.plotting import plot_stat_map
from nilearn.image import math_img
from nilearn.input_data import NiftiMasker

thresh = 0.8
coords = [-5, 5, -25]

# Full brain
ax_plot = plt.subplot2grid((4, 3), (0, 0), colspan=1)
mask_brain = math_img(f"img>{thresh}", img=mni.mask)
val_brain = NiftiMasker(mask_img=mask_brain).fit_transform(mni.t1)
sns.distplot(val_brain)
ax_plot = plt.subplot2grid((4, 3), (0, 1), colspan=2)
plot_stat_map(mni.mask,
              bg_img=mni.t1,
              cut_coords=coords,
              axes=ax_plot,
              black_bg=True,
              title='cerveau')

# Gray matter
ax_plot = plt.subplot2grid((4, 3), (1, 0), colspan=1)
mask_gm = math_img(f"img>{thresh}", img=mni.gm)
val_gm = NiftiMasker(mask_img=mask_gm).fit_transform(mni.t1)
sns.distplot(val_gm)
ax_plot = plt.subplot2grid((4, 3), (1, 1), colspan=2)
plot_stat_map(mni.gm,
              bg_img=mni.t1,
              cut_coords=coords,
              axes=ax_plot,
              black_bg=True,
              title='mati√®re grise')

# White matter
ax_plot = plt.subplot2grid((4, 3), (2, 0), colspan=1)
mask_wm = math_img(f"img>{thresh}", img=mni.wm)
val_wm = NiftiMasker(mask_img=mask_wm).fit_transform(mni.t1)
sns.distplot(val_wm)
ax_plot = plt.subplot2grid((4, 3), (2, 1), colspan=2)
plot_stat_map(mni.wm,
              bg_img=mni.t1,
              cut_coords=coords,
              axes=ax_plot,
              black_bg=True,
              title='mati√®re blanche')

# CSF
ax_plot = plt.subplot2grid((4, 3), (3, 0), colspan=1)
mask_csf = math_img(f"img>{thresh}", img=mni.csf)
val_csf = NiftiMasker(mask_img=mask_csf).fit_transform(mni.t1)
sns.distplot(val_csf, axlabel="intensit√© de l'image", hist_kws={"bins": range(0, 100)})
ax_plot = plt.subplot2grid((4, 3), (3, 1), colspan=2)
plot_stat_map(mni.csf,
              bg_img=mni.t1,
              cut_coords=coords,
              axes=ax_plot,
              black_bg=True,
              title='liquide cephalo rachidien')

from myst_nb import glue
glue("mni-segmentation-fig", fig, display=False)
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mTypeError[0m                                 Traceback (most recent call last)
[0;32m<ipython-input-3-15394e1d7b2d>[0m in [0;36m<module>[0;34m[0m
[1;32m     65[0m [0mmask_csf[0m [0;34m=[0m [0mmath_img[0m[0;34m([0m[0;34mf"img>{thresh}"[0m[0;34m,[0m [0mimg[0m[0;34m=[0m[0mmni[0m[0;34m.[0m[0mcsf[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     66[0m [0mval_csf[0m [0;34m=[0m [0mNiftiMasker[0m[0;34m([0m[0mmask_img[0m[0;34m=[0m[0mmask_csf[0m[0;34m)[0m[0;34m.[0m[0mfit_transform[0m[0;34m([0m[0mmni[0m[0;34m.[0m[0mt1[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 67[0;31m [0msns[0m[0;34m.[0m[0mdistplot[0m[0;34m([0m[0mval_csf[0m[0;34m,[0m [0maxlabel[0m[0;34m=[0m[0;34m"intensit√© de l'image"[0m[0;34m,[0m [0mhist_kws[0m[0;34m=[0m[0;34m{[0m[0;34m"bins"[0m[0;34m:[0m [0mrange[0m[0;34m([0m[0;36m0[0m[0;34m,[0m [0;36m100[0m[0;34m)[0m[0;34m}[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     68[0m [0max_plot[0m [0;34m=[0m [0mplt[0m[0;34m.[0m[0msubplot2grid[0m[0;34m([0m[0;34m([0m[0;36m4[0m[0;34m,[0m [0;36m3[0m[0;34m)[0m[0;34m,[0m [0;34m([0m[0;36m3[0m[0;34m,[0m [0;36m1[0m[0;34m)[0m[0;34m,[0m [0mcolspan[0m[0;34m=[0m[0;36m2[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     69[0m plot_stat_map(mni.csf,

[0;32m~/env/psy3018/lib/python3.8/site-packages/seaborn/distributions.py[0m in [0;36mdistplot[0;34m(a, bins, hist, kde, rug, fit, hist_kws, kde_kws, rug_kws, fit_kws, color, vertical, norm_hist, axlabel, label, ax, x)[0m
[1;32m   2616[0m         [0morientation[0m [0;34m=[0m [0;34m"horizontal"[0m [0;32mif[0m [0mvertical[0m [0;32melse[0m [0;34m"vertical"[0m[0;34m[0m[0;34m[0m[0m
[1;32m   2617[0m         [0mhist_color[0m [0;34m=[0m [0mhist_kws[0m[0;34m.[0m[0mpop[0m[0;34m([0m[0;34m"color"[0m[0;34m,[0m [0mcolor[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0;32m-> 2618[0;31m         ax.hist(a, bins, orientation=orientation,
[0m[1;32m   2619[0m                 color=hist_color, **hist_kws)
[1;32m   2620[0m         [0;32mif[0m [0mhist_color[0m [0;34m!=[0m [0mcolor[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m

[0;32m~/env/psy3018/lib/python3.8/site-packages/matplotlib/__init__.py[0m in [0;36minner[0;34m(ax, data, *args, **kwargs)[0m
[1;32m   1359[0m     [0;32mdef[0m [0minner[0m[0;34m([0m[0max[0m[0;34m,[0m [0;34m*[0m[0margs[0m[0;34m,[0m [0mdata[0m[0;34m=[0m[0;32mNone[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[1;32m   1360[0m         [0;32mif[0m [0mdata[0m [0;32mis[0m [0;32mNone[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[0;32m-> 1361[0;31m             [0;32mreturn[0m [0mfunc[0m[0;34m([0m[0max[0m[0;34m,[0m [0;34m*[0m[0mmap[0m[0;34m([0m[0msanitize_sequence[0m[0;34m,[0m [0margs[0m[0;34m)[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m   1362[0m [0;34m[0m[0m
[1;32m   1363[0m         [0mbound[0m [0;34m=[0m [0mnew_sig[0m[0;34m.[0m[0mbind[0m[0;34m([0m[0max[0m[0;34m,[0m [0;34m*[0m[0margs[0m[0;34m,[0m [0;34m**[0m[0mkwargs[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m

[0;31mTypeError[0m: hist() got multiple values for argument 'bins'
TypeError: hist() got multiple values for argument 'bins'

